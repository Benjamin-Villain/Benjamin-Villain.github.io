<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Examen</title>
</head>
<body>  
    <h1>Examen</h1>
    <canvas id="myCanvas" width="200" height="200"></canvas>
</body>
<script>
    
        var canvas = document.getElementById('myCanvas');
        var ctx = canvas.getContext('2d');
        ctx.fillStyle = 'grey';
        ctx.fillRect(0, 0, 300, 300);

        var img = new Image();
        var needle = new Image();
        img.src = 'assets/compass.png';
        needle.src = 'assets/needle.png';

        img.onload = function() {
        ctx.drawImage(img, 0, 0);
        }
        
        needle.onload =  function() {
            rotation(0)
        }

        window.addEventListener("deviceorientation", handleOrientation, true);

        function handleOrientation(event) {
            rotation(event.alpha)
        }

        function rotation(degrees){
            ctx.save();
            ctx.translate(canvas.width/2,canvas.height/2);
            ctx.rotate(degrees * Math.PI/180);
            ctx.drawImage(needle,-needle.width/2,-needle.width/2)
            ctx.restore()
        }

</script>
</html>